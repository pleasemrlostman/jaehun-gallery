(this["webpackJsonpjaehun-gallery"]=this["webpackJsonpjaehun-gallery"]||[]).push([[0],{83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var a=n(9),c=n.n(a),r=n(46),s=n.n(r),l=n(14),i=n(36),u=n(17),o=n(0),d=n.n(o),b=n(1),j=n(34);n(57),n(87),n(86);j.a.initializeApp({apiKey:"AIzaSyB22P7NHDLumklBkMZL4JvZoMnn_HXMgts",authDomain:"jaehun-gallery.firebaseapp.com",projectId:"jaehun-gallery",storageBucket:"jaehun-gallery.appspot.com",messagingSenderId:"1026744595757",appId:"1:1026744595757:web:7683c2b6301092532a4fa4"});var f=j.a,x=j.a.auth(),p=j.a.firestore(),m=j.a.storage(),h=n(8),O=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(l.a)(r,2),i=s[0],u=s[1],o=Object(a.useState)(!0),j=Object(l.a)(o,2),p=j[0],m=j[1],O=Object(a.useState)(""),g=Object(l.a)(O,2),v=g[0],w=g[1],y=function(e){var t=e.target,n=t.name,a=t.value;"email"===n?c(a):"password"===n&&u(a)},N=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!p){e.next=8;break}return e.next=5,x.createUserWithEmailAndPassword(n,i);case 5:e.sent,e.next=11;break;case 8:return e.next=10,x.signInWithEmailAndPassword(n,i);case 10:e.sent;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),w(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"googleLogin"===(n=t.target.name)?(console.log(n),a=new f.auth.GoogleAuthProvider):"githubLogin"===n&&(console.log(n),a=new f.auth.GithubAuthProvider),e.next=4,x.signInWithPopup(a);case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"flex flex-col items-center justify-center border p-4 w-full m-auto h-screen max-w-sm",children:[Object(h.jsxs)("form",{onSubmit:N,className:"flex flex-col items-center justify-center w-full",children:[Object(h.jsx)("input",{className:"border border-gray-500 w-full mb-3 p-2 rounded-lg",type:"email",name:"email",value:n,onChange:y,placeholder:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694"}),Object(h.jsx)("input",{className:"border border-gray-500 w-full mb-3 p-2 rounded-lg",type:"password",name:"password",value:i,onChange:y,placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694"}),Object(h.jsx)("input",{className:"border text-white bg-blue-600  w-full mb-3 p-2 rounded-lg",type:"submit",value:p?"\ud68c\uc6d0\uac00\uc785":"\ub85c\uadf8\uc778"})]}),Object(h.jsx)("p",{className:"p-2 text-red-500 text-xs",children:v}),Object(h.jsx)("p",{className:"p-2 text-blue-500",onClick:function(){m((function(e){return!e}))},children:p?"\ub85c\uadf8\uc778\uc73c\ub85c \uc804\ud658\ud558\uae30":"\ud68c\uc6d0\uac00\uc785\uc73c\ub85c \uc804\ud658\ud558\uae30"}),Object(h.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[Object(h.jsx)("button",{style:{display:"none"},className:"border border-gray-500 w-full mb-3 p-2 rounded-lg",onClick:k,name:"googleLogin",children:"\uad6c\uae00\ub85c \ub85c\uadf8\uc778\ud558\uae30"}),Object(h.jsx)("button",{className:"border border-gray-500 w-full mb-3 p-2 rounded-lg",onClick:k,name:"githubLogin",children:"\uae43\ud5c8\ube0c\ub85c \ub85c\uadf8\uc778\ud558\uae30"})]})]})},g=n(47),v=function(e){var t=e.value,n=e.userObj,c=Object(a.useState)(t.text),r=Object(l.a)(c,2),s=r[0],i=r[1],u=Object(a.useState)(!1),o=Object(l.a)(u,2),j=o[0],f=o[1],x=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc815\ub9d0\ub85c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=6;break}if(p.doc("contents/".concat(t.id)).delete(),""===t.attachmentUrl){e.next=6;break}return e.next=6,m.refFromURL(t.attachmentUrl).delete();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"content border border-gray-300 flex flex-col shadow-xl p-4 rounded-xl mb-4",children:[Object(h.jsxs)("div",{className:"mb-3 flex items-center text-xs justify-between",children:[Object(h.jsxs)("span",{className:"ml-1 top-content",children:["\uc791\uc131\uc790:\xa0",t.writerNickname]}),n.uid===t.userId?Object(h.jsxs)("div",{className:"flex gap-1",children:[Object(h.jsx)("button",{onClick:function(){f((function(e){return!e}))},children:"\uc218\uc815"}),Object(h.jsx)("button",{onClick:x,children:"\uc0ad\uc81c"})]}):null]}),t.attachmentUrl?Object(h.jsx)("div",{children:Object(h.jsx)("img",{className:"w-full mb-4 rounded-2xl",src:t.attachmentUrl})}):null,j?Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p.doc("contents/".concat(t.id)).update({text:s}),f((function(e){return!e}))},className:"flex border-black-500 border w-full mb-3",children:[Object(h.jsx)("input",{className:"p-3 w-10/12",onChange:function(e){var t=e.target.value;i(t)},type:"text",value:s}),Object(h.jsx)("input",{className:"p-3 w-2/12 text-xs",type:"submit"})]}):Object(h.jsx)("div",{className:"mb-2",children:t.text}),Object(h.jsx)("div",{className:"text-xs text-right",children:t.writedDate})]})},w=n(89),y=function(e){var t=e.userObj,n=Object(a.useState)([]),c=Object(l.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(""),u=Object(l.a)(i,2),o=u[0],j=u[1],f=Object(a.useState)(""),x=Object(l.a)(f,2),O=x[0],y=x[1],N=Object(a.useState)(""),k=Object(l.a)(N,2),D=k[0],S=k[1],C=Object(a.useState)(!1),U=Object(l.a)(C,2),L=U[0],I=U[1],M={todayYear:(new Date).getFullYear(),todayMonth:(new Date).getMonth()+1,todayDay:(new Date).getDate(),todayHours:(new Date).getHours()<10?"0"+(new Date).getHours():(new Date).getHours(),todayMinutes:(new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes()},P=function(){var e=Object(b.a)(d.a.mark((function e(n){var a,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a="",""===D){e.next=10;break}return c=m.ref().child("".concat(t.uid,"/").concat(Object(w.a)())),e.next=6,c.putString(D,"data_url");case 6:return r=e.sent,e.next=9,r.ref.getDownloadURL();case 9:a=e.sent;case 10:if(""===o||""===O){e.next=18;break}return e.next=13,p.collection("contents").add({text:o,writedDate:"".concat(M.todayYear,"\ub144 ").concat(M.todayMonth,"\uc6d4 ").concat(M.todayDay,"\uc77c ").concat(M.todayHours,"\uc2dc ").concat(M.todayMinutes,"\ubd84"),createdDate:Date.now(),writerNickname:O,userId:t.uid,attachmentUrl:a});case 13:j(""),y(""),S(""),e.next=19;break;case 18:""===O&&""===o?alert("\ub2c9\ub124\uc784\uacfc \uc800\uc5d0\uac8c \ud558\uace0\uc2f6\uc740 \ub9d0\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694"):""===O?alert("\ub2c9\ub124\uc784\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694"):""===o&&alert("\uc800\uc5d0\uac8c \ud558\uace0\uc2f6\uc740 \ub9d0\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694");case 19:I((function(e){return!e}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){I((function(e){return!e}))};return Object(a.useEffect)((function(){p.collection("contents").orderBy("createdDate","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(g.a)({id:e.id},e.data())}));s(t)}))}),[]),Object(h.jsxs)(h.Fragment,{children:[L&&Object(h.jsx)("div",{className:"w-full flex items-end fixed bottom-0 left-0 p-4 bg-black bg-opacity-80 h-full",children:Object(h.jsxs)("div",{className:"bg-white",children:[""===D?null:Object(h.jsx)("div",{className:"flex items-center justify-center p-4",children:Object(h.jsx)("img",{className:"w-6/12 rounded-2xl",src:D})}),Object(h.jsxs)("div",{className:"w-full",style:{display:"none"},children:[Object(h.jsx)("input",{onChange:function(e){var t=e.target.files[0],n=new FileReader;n.readAsDataURL(t),n.onloadend=function(e){var t=e.currentTarget.result;S(t)}},className:"pl-3 w-9/12",type:"file",accept:"image/*"}),Object(h.jsx)("button",{className:"w-3/12 p-3 text-white bg-red-600",onClick:function(){S("")},children:"\uc0ad\uc81c"})]}),Object(h.jsx)("form",{onSubmit:P,className:"w-full flex flex-col",children:Object(h.jsxs)("div",{className:"w-full flex flex-col",children:[Object(h.jsxs)("div",{className:"",children:[Object(h.jsx)("input",{onChange:function(e){var t=e.target.value;y(t)},value:O,placeholder:"\ub2c9\ub124\uc784",className:"w-3/12 p-3 border"}),Object(h.jsx)("input",{onChange:function(e){var t=e.target.value;j(t)},value:o,className:"border w-9/12 p-3 rounded",type:"text",placeholder:"\ub098\uc5d0\uac8c \ud558\uace0\uc2f6\uc740 \ub9d0 \uc791\uc131\ud574"})]}),Object(h.jsxs)("div",{className:"flex items-center justify-center",children:[Object(h.jsx)("input",{className:"w-6/12 p-3  text-white bg-blue-600",type:"submit",value:"\uc791\uc131\ud558\uae30"}),Object(h.jsx)("div",{onClick:A,className:"w-6/12 p-3 text-center bg-gray-400 text-white",children:"\ucde8\uc18c\ud558\uae30"})]})]})})]})}),Object(h.jsx)("div",{className:"flex flex-col p-4 pb-16 pt-16 mt-4",children:r.map((function(e,n){return Object(h.jsx)(v,{value:e,userObj:t},n)}))}),L?null:Object(h.jsx)("div",{className:"fixed bottom-0 left-0 w-full p-5 bg-blue-600 text-white text-center",onClick:A,children:"\ud55c\ub9c8\ub514 \ub0a8\uae30\uae30"})]})},N=function(e){var t=e.userObj;return Object(h.jsxs)("div",{className:"flex p-5 justify-between bg-blue-600 text-white fixed w-full top-0 left-0",children:[Object(h.jsx)("h1",{className:"font-bold",children:"\uc815\uc7ac\ud6c8 \uac24\ub7ec\ub9ac"}),Object(h.jsxs)("div",{className:"flex gap-3",children:[Object(h.jsx)(i.b,{to:"/",children:"Home"}),Object(h.jsx)(i.b,{to:"/profile",children:null===t.displayName?"\ub2c9\ub124\uc784\uc124\uc815":t.displayName+"\uc758 \ud504\ub85c\ud544"})]})]})},k=function(e){var t=e.userObj,n=e.refreshUser,c=function(){var e=Object(b.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.collection("contents").where("userId","==",t.uid).orderBy("createdDate","desc").get();case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=Object(a.useState)(t.displayName),s=Object(l.a)(r,2),i=s[0],u=s[1],o=function(){var e=Object(b.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),t.displayName===i){e.next=5;break}return e.next=4,t.updateProfile({displayName:i});case 4:n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){c()}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"w-full fixed left-0 bottom-0 p-5 bg-red-600 text-white text-center",children:Object(h.jsx)("button",{onClick:function(){return x.signOut()},children:"LogOut"})}),Object(h.jsx)("div",{className:"p-3 pt-16 mt-4",children:Object(h.jsxs)("form",{onSubmit:o,className:"flex border-black-500 border w-full mb-3",children:[Object(h.jsx)("input",{onChange:function(e){var t=e.target.value;u(t)},className:"p-3 w-9/12",type:"text",placeholder:"\uc0ac\uc6a9\ud558\uc2e4 \ub2c9\ub124\uc784\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694",maxLength:"6",value:i}),Object(h.jsx)("input",{className:"p-3 w-3/12 text-xs",type:"submit",value:"\ub2c9\ub124\uc784 \ubcc0\uacbd"})]})})]})},D=function(e){var t=e.isLoggedIn,n=e.userObj,a=e.refreshUser;return Object(h.jsxs)(i.a,{children:[t?Object(h.jsx)(N,{userObj:n}):null,Object(h.jsxs)(u.d,{children:[t?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(u.b,{exact:!0,path:"/",children:Object(h.jsx)(y,{userObj:n})}),Object(h.jsx)(u.b,{exact:!0,path:"/profile",children:Object(h.jsx)(k,{userObj:n,refreshUser:a})})]}):Object(h.jsx)(u.b,{exact:!0,path:"/",component:O}),Object(h.jsx)(u.a,{from:"*",to:"/"})]})]})},S=n(50),C=n.n(S),U=function(){return Object(h.jsx)("div",{className:"flex items-center justify-center h-screen",children:Object(h.jsx)(C.a,{type:"Oval",color:"#337aee",height:80,width:80,timeout:3e4})})};var L=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),s=Object(l.a)(r,2),i=s[0],u=s[1];return Object(a.useEffect)((function(){x.onAuthStateChanged((function(e){u(!!e&&{uid:e.uid,displayName:e.displayName,updateProfile:function(t){return e.updateProfile(t)}}),c(!0)}))}),[]),Object(h.jsx)("div",{className:"App",children:n?Object(h.jsx)(D,{isLoggedIn:Boolean(i),userObj:i,refreshUser:function(){var e=x.currentUser;u({uid:e.uid,displayName:e.displayName,updateProfile:function(t){return e.updateProfile(t)}})}}):Object(h.jsx)(U,{})})};n(83),n(84);s.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(L,{})}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.2b80cc19.chunk.js.map